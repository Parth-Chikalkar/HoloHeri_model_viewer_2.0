<!doctype html>
<html lang="en">
  <head>
    <title>Konark Temple Interactive</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <style>
      model-viewer {
        width: 100%;
        height: 90vh;
        background-color: #f5f5f5;
      }

      /* The White Buttons (Hotspots) */
      .Hotspot {
        background: #fff;
        border-radius: 50%;
        width: 24px;
        height: 24px;
        border: 3px solid #007bff;
        cursor: pointer;
        box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        transition: transform 0.3s;
      }

      /* Hide info boxes by default */
      .HotspotAnnotation {
        display: none;
        background: #ffffff;
        border-radius: 8px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.25);
        padding: 15px;
        position: absolute;
        width: 280px;
        left: 30px;
        top: -20px;
        color: #333;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.5;
        z-index: 100;
        pointer-events: auto; /* Allows you to scroll/click inside the box */
      }

      /* Class to show the info when toggled */
      .active .HotspotAnnotation {
        display: block;
      }

      h3 { margin: 0 0 8px 0; font-size: 18px; color: #007bff; }
      p { margin: 0; font-size: 14px; }
    </style>
  </head>
  <body>

    <model-viewer id="konark-viewer" 
                  src="finalKonark-v1 (4).glb" 
                  ar ar-modes="scene-viewer webxr quick-look" 
                  camera-controls 
                  shadow-intensity="1">
      
      <button class="Hotspot" slot="hotspot-3" 
              data-position="0.10445672255424832m -0.7710759617459311m -4.372431650946587m" 
              data-normal="-0.9717788715225063m 0.1797882146781417m 0.15271549602214804m">
          <div class="HotspotAnnotation">
              <h3>Main Tower (Vimana)</h3>
              <p>This is the principal shrine of the Konark Sun Temple, symbolizing Mount Meru, the cosmic center of the universe.</p>
          </div>
      </button>

      <button class="Hotspot" slot="hotspot-8" 
              data-position="0.6554348898181508m -1.9247499110575936m -1.3890951899779624m" 
              data-normal="-0.0009047585838649483m 0.9999728723895843m -0.007309986103211903m">
          <div class="HotspotAnnotation">
              <h3>Jagamohana</h3>
              <p>The grand audience hall where devotees gathered. Its roof is shaped like a pyramid with intricate carvings.</p>
          </div>
      </button>

    </model-viewer> 

    <script>
      const viewer = document.querySelector("#konark-viewer");
      const hotspots = document.querySelectorAll(".Hotspot");

      hotspots.forEach((hotspot) => {
        hotspot.addEventListener('click', (event) => {
          // 1. Prevent the model from moving/rotating when clicking the button
          event.stopPropagation();

          // 2. Close all other open annotations first
          hotspots.forEach(h => {
            if (h !== hotspot) h.classList.remove('active');
          });

          // 3. Toggle the clicked one
          hotspot.classList.toggle('active');
        });
      });
    </script>

    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/4.0.0/model-viewer.min.js"></script>
  </body>
</html>