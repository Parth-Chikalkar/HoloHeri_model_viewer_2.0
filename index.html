<!doctype html>
<html lang="en">
  <head>
    <title>Konark Temple Interactive</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <style>
      model-viewer {
        width: 100%;
        height: 90vh;
        background-color: #f5f5f5;
        --min-hotspot-opacity: 0;
      }

      /* The White Buttons (Hotspots) */
      .Hotspot {
        background: #fff;
        border-radius: 50%;
        width: 24px;
        height: 24px;
        border: 3px solid #007bff;
        cursor: pointer;
        box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        transition: transform 0.3s, opacity 0.3s;
      }

      /* Keep hotspots visible even when behind the model (optional) */
      .Hotspot:not([data-visible]) {
        opacity: 0.4;
      }

      /* Info Box Styling */
      .HotspotAnnotation {
        display: none;
        background: #ffffff;
        border-radius: 8px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.25);
        padding: 15px;
        position: absolute;
        width: 280px;
        left: 30px;
        top: -20px;
        color: #333;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.5;
        z-index: 100;
        pointer-events: auto;
      }

      /* Show info when button is active */
      .active .HotspotAnnotation {
        display: block;
      }

      h3 { margin: 0 0 8px 0; font-size: 18px; color: #007bff; }
      p { margin: 0; font-size: 14px; }
    </style>
  </head>
  <body>

    <model-viewer id="konark-viewer" 
                  src="finalKonark-v1 (4).glb" 
                  ar ar-modes="scene-viewer webxr quick-look" 
                  camera-controls 
                  shadow-intensity="1"
                  camera-orbit="45deg 75deg 15m" 
                  field-of-view="35deg"
                  data-js-focus-visible>
      
      <button class="Hotspot" slot="hotspot-3" 
              data-position="0.1044m -0.7710m -4.3724m" 
              data-normal="-0.9717m 0.1797m 0.1527m"
              data-visibility-attribute="visible">
          <div class="HotspotAnnotation">
              <h3>Main Tower (Vimana)</h3>
              <p>This is the principal shrine of the Konark Sun Temple, symbolizing Mount Meru.</p>
          </div>
      </button>

      <button class="Hotspot" slot="hotspot-8" 
              data-position="0.6554m -1.9247m -1.3890m" 
              data-normal="-0.0009m 0.9999m -0.0073m"
              data-visibility-attribute="visible">
          <div class="HotspotAnnotation">
              <h3>Jagamohana</h3>
              <p>The grand audience hall where devotees gathered. It features a pyramidal roof with intricate carvings.</p>
          </div>
      </button>

    </model-viewer> 

    <script>
      const hotspots = document.querySelectorAll(".Hotspot");

      hotspots.forEach((hotspot) => {
        hotspot.addEventListener('click', (event) => {
          // Stop rotation/movement when clicking
          event.stopPropagation();

          // Close others
          hotspots.forEach(h => {
            if (h !== hotspot) h.classList.remove('active');
          });

          // Toggle current
          hotspot.classList.toggle('active');
        });
      });

      // Close annotation if you click on the model background
      document.querySelector('#konark-viewer').addEventListener('click', (event) => {
        if (event.target.classList.contains('Hotspot')) return;
        hotspots.forEach(h => h.classList.remove('active'));
      });
    </script>

    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/4.0.0/model-viewer.min.js"></script>
  </body>
</html>